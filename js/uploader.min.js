function fileUploader(n,t){var u,i,r;for($(".loading").show(),u=n.files,i=new FormData,r=0;r<u.length;r++)i.append(u[r].name,u[r]);i.append("contactId",t);i.append("replyId",replyid);$.ajax({url:"/Home/UploadFiles",type:"POST",contentType:!1,processData:!1,data:i,"async":!1,success:function(n){n!=""&&LoadProgressBar(n,t)},error:function(n){alert(n.statusText)}})}function LoadProgressBar(n,t){function u(){var n=i.progressbar("value")||0;i.progressbar("value",n+1);n<99&&setTimeout(u,25)}var i=$("#files-progressbar"),r=$(".progress-label");$("#pogressbarModal").modal({backdrop:"static",keyboard:!1});$("#pogressbarModal").modal("show");i.show();$("#files-progressbar").progressbar({change:function(){r.text(i.progressbar("value")+"%")},complete:function(){var f;r.text("Loading Completed!");i.progressbar("value",0);r.text("");i.hide();var e=n.split(";"),o="",u=$(".message-input .card-header").text();for(u&&(u=u.substring(0,u.length-1)),f=0;f<e.length;f++)o+=`<li class="from-me">`,u&&(o+=`<div class="card" data-id="`+(replyid?replyid:"")+`" >
                      <div class="card-header">`+u+`</div>`),o+=IsImage(e[f])?`<label><a href="/uploads/`+e[f]+`" target="_blank" ><img class="fupload" src="/uploads/thumbnails/`+e[f]+`" /></a></label>`:`<label><a href="/uploads/`+e[f]+`" target="_blank" >file(`+e[f]+`)</a></label>`,u&&(o+=`</div>`),o+=`</li>`;$(".loading").hide();$(".chat-pm-input textarea").val("");$("#lastchat").before(o);$("#Files").val("");$("#pogressbarModal").modal("hide");sendBySignalR(t,"isfile;;;"+userid+";;;"+n+",;,"+u+";;;;;;"+replyid);replyid?($(".message-input .card-header span").trigger("click"),replyid=""):allDropDownButtonProcess()}});setTimeout(u,100)}function IsImage(n){var t=n.toLowerCase().substring(n.lastIndexOf("."));return[".jpg",".jpeg",".bmp",".png",".gif",".tiff"].includes(t)?!0:!1}function IsAudio(n){var t=n.toLowerCase().substring(n.lastIndexOf("."));return[".wav",".mp3"].includes(t)?!0:!1}