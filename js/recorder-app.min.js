function loadRecData(){(recordButton=document.getElementById("microphone_btn"),recordButton)&&(recordButton.addEventListener("click",startRecording),stopButton=document.getElementById("stopButton"),loader=document.getElementById("loader"),stopButton.style.display="none",stopButton.addEventListener("click",stopRecording))}function startRecording(){console.log("recordButton clicked");navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(n){console.log("getUserMedia() success, stream created, initializing Recorder.js ...");audioContext=new AudioContext;gumStream=n;input=audioContext.createMediaStreamSource(n);rec=new Recorder(input,{numChannels:1});rec.record();console.log("Recording started")}).catch(function(){recordButton.style.display="flex";stopButton.style.display="none"});recordButton.style.display="none";stopButton.style.display="flex"}function stopRecording(){console.log("stopButton clicked");loader=document.getElementById("loader");$(loader).show();$(".loading").show();stopButton.style.display="none";recordButton.style.display="flex";rec.stop();gumStream.getAudioTracks()[0].stop();rec.exportWAV(createDownloadLink)}function createDownloadLink(n){var u=URL.createObjectURL(n),f=document.createElement("audio"),e=document.createElement("li"),r=(new Date).toISOString()+".wav",i=new XMLHttpRequest,t;i.onload=function(n){this.readyState===4&&(console.log("Server returned: ",n.target.responseText),$(".loading").hide(),window.location.href="/Home/Index/1",loader.style="")};t=new FormData;t.append("audio_data",n,r);t.append("user",$(".contact.active").data("id"));i.open("POST","/Home/VoiceRecorder",!0);i.send(t)}URL=window.URL||window.webkitURL;var gumStream,rec,input,AudioContext=window.AudioContext||window.webkitAudioContext,audioContext,recordButton,stopButton,loader;