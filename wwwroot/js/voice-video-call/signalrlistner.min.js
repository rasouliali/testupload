var usersProfilePics,signalRListenerThis,beforeCallId="",isCaller=!1;class signalRListener{constructor(){(signalRListenerThis=this).sendNotConnectMess=!1,this.isDebugging=!0,this.hubUrl="/ConnectionHub",this.callingUser={},this.wsconn=(new signalR.HubConnectionBuilder).withUrl(this.hubUrl,signalR.HttpTransportType.WebSockets).withAutomaticReconnect({nextRetryDelayInMilliseconds:e=>($(".chat h5.chatpage").html("ZN Vostok     Connecting..."),checkForRestartSignalR(),1e6)}).configureLogging(signalR.LogLevel.None).build(),this.initializeSignalR(),this.wsconn.onclose(e=>{$(".chat h5.chatpage").html("ZN Vostok     Connecting..."),e?(console.log("SignalR: closed with error."),console.log(e)):console.log("Disconnected"),checkForRestartSignalR()}),this.wsconn.on("updateUserList",n=>{var a;$(".chat h5.chatpage").html("ZN Vostok"),n=JSON.parse(n),ul=n,$("#usersLength").text(n.length),$("#usersdata li.user").remove(),$(".contact img").removeClass("online"),$(".contact.active").data("id")&&(ul&&ul.find(e=>e.userId.toLowerCase()==$(".contact.active").data("id").toLowerCase())?($(".pro-small .lastseen").html("Online"),$("li span:not(.seen):not(.delev)").addClass("delev")):(a=$(".contact.active").data("id"),$.post("/Home/UserLastSeen",{contactId:a},function(e){e.lastSeen&&($(".pro-small .lastseen").html(getNiceDateTimeFormat(e.lastSeen)),delevCalc(a,e.lastSeen))}))),$.each(n,function(e){var a="";n[e].username===$("#upperUsername").text()&&(myConnectionId=n[e].connectionId,a="icon-employee"),a||(n[e].inCall,a="icon-smartphone-1"),n[e].inCall,$('.contact[data-id="'+n[e].userId.toLowerCase()+'"] img').addClass("online")})}),this.wsconn.on("callAcceptedNewMember",(n,e,s)=>{CheckDuplicateInLockBlock(n).then(function(e){var a;e&&(console.log("SignalR: call accepted from: "+s+".  Initiating WebRTC call and offering my stream up..."),s=JSON.parse(s),$("#call-status-lbl").html("Call accepted..."),mySignalRListener.setConnectionIdToConferenceJson(s),beepring.pause(),beepring.currentTime=0,beepring.volume=0,dt1=new Date,videoaudiotimer=setTimeout(timerDisplayFun,1e3),setTimeout(function(){$("#call-status-lbl").html("Connected")},3e3),$(".page2").hide(),$(".page3").show(),e=new Date,((a=$("body").attr("data-json"))?a=JSON.parse(a):((a=[]).push({userid:myUserId,st:e,isCaller:!0,callid:n}),a)).push({userid:s.userId,st:e,isCaller:!1,callid:n,connectionId:s.connectionId}),$("body").attr("data-json",JSON.stringify(a)),createOfferWhenLocalStreamIsReady(s,localStream))})}),this.wsconn.on("callAccepted",(e,a,n)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&(console.log("SignalR: call accepted from: "+n+".  Initiating WebRTC call and offering my stream up..."),n=JSON.parse(n),mySignalRListener.setConnectionIdToConferenceJson(n),$("#call-status-lbl").html("Call accepted..."),beepring.pause(),beepring.currentTime=0,beepring.volume=0,dt1=new Date,videoaudiotimer=setTimeout(timerDisplayFun,1e3),setTimeout(function(){$("#call-status-lbl").html("Connected")},3e3),$(".page2").hide(),$(".page3").show(),createOfferWhenLocalStreamIsReady(n,localStream))})}),this.wsconn.on("callDeclined",(e,a,n,s)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&(n=JSON.parse(n),console.log("SignalR: call declined from: "+n.connectionId),$("#call-status-lbl").html("Call Declined!"),beepring.pause(),beepring.currentTime=0,beepring.volume=0,alertify.error(s,5),setTimeout(function(){$(".hangup").trigger("click")},3e3))})}),this.wsconn.on("IncomingCallAddMember",(l,i,o,r)=>{CheckDuplicateInLockBlock(l).then(function(e){if(e&&(console.log("SignalR: IncomingCallAddMember call from: "+o),r=JSON.parse(r),"idle"==$("body").attr("data-mode"))){for(var a=[],n=0;n<r.length;n++){var s=r[n],t={userid:s.userid,st:s.st,isCaller:s.isCaller};s.connectionId&&(t.connectionId=s.connectionId),a.push(t)}$("body").attr("data-json",JSON.stringify(a)),mySignalRListener.processIncomeCall(l,i,o,!1,r)}})}),this.wsconn.on("incomingCall",(a,n,s,t)=>{CheckDuplicateInLockBlock(a).then(function(e){e&&mySignalRListener.processIncomeCall(a,n,s,t)})}),this.wsconn.on("receiveSignal",(e,a,n,s,t)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&(n=JSON.parse(n),newSignal(n.connectionId,s,a,n.userId),t)&&mySignalRListener.replaceCallIdInDataJson(t,a)})}),this.wsconn.on("callEnded",(e,a,n,s)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&($("#call-status-lbl").html("Call ended"),e=new Date-dt1,n=JSON.parse(n),$.post("/Home/CallLogUpdate",{Status:2,ToUser:n.userId,duration:e/1e3},function(){}),$("body").removeAttr("data-json"),setTimeout(function(){$(".hangup").trigger("click")},3e3),console.log("SignalR: call with "+n.connectionId+" has ended: "+s),alertify.error(s,5),beepring.pause(),beepring.currentTime=0,beepring.volume=0,closeConnection(a),$("#callstatus").text("Idle"))})}),this.wsconn.on("OnSeenMess",(e,a)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&("all"==a?$("li span:not(.seen)"):$("li[data-id="+a+"] span")).addClass("seen")})}),this.wsconn.on("OnSeenMessForGroup",(e,a,n)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&("all"==n?$("li span:not(.seen)"):$("li[data-id="+n+"] span")).addClass("seen")})}),this.wsconn.on("ReceiveMessageFromGroup",(e,a,n,s)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&n.split(";;;")[1].toLowerCase()!=myUserId.toLowerCase()&&(console.log("ProcessReceiveMessege","message:"+n+",grpName:"+a+",ContactName:"+s),signalRListenerThis.ProcessReceiveMessege(n,a,s))})}),this.wsconn.on("ReceiveMessage",(e,a)=>{CheckDuplicateInLockBlock(e).then(function(e){e&&signalRListenerThis.ProcessReceiveMessege(a)})})}replaceCallIdInDataJson(a,e){if(n=$("body").attr("data-json")){for(var n,s=(n=JSON.parse(n)).filter(e=>e.callid==a),t=0;t<s.length;t++)s[t].callid=e;$("body").attr("data-json",JSON.stringify(n))}}setConnectionIdToConferenceJson(a){var e=$("body").attr("data-json");e&&((e=JSON.parse(e)).filter(e=>e.userid==a.userId)[0].connectionId=a.connectionId,$("body").attr("data-json",JSON.stringify(e)))}processIncomeCall(e,a,n,s,t){$("#call-status-lbl").html("Call started"),t?(console.log("SignalR: incoming Conference call from: "+n),s=!1):console.log("SignalR: incoming"+(isVideoCall?" video ":" voice ")+"call from: "+n),mySignalRListener.callingUser=JSON.parse(n);t=new Date,n=$("body").attr("data-json");if(n?(n=JSON.parse(n)).push({userid:mySignalRListener.callingUser.userId,st:t,isCaller:!1,callid:e}):((n=[]).push({userid:mySignalRListener.callingUser.userId,st:t,isCaller:!0,callid:e}),n.push({userid:myUserId,st:t,isCaller:!1,callid:e})),$("body").attr("data-json",JSON.stringify(n)),isVideoCall=s,$(".call-buttons img").removeClass("active"),isVideoCall?($("#CallingModal .video").addClass("active"),$("#CallingModal .video video").show(),$(".two-img").addClass("hideinmobile")):($("#CallingModal .video").removeClass("active"),$("#CallingModal .video video").hide(),$(".two-img").removeClass("hideinmobile")),$(".partner")[0].style.display="none",0==isVideoCall?(localVideo.style.display="none",remoteVideo.style.display="none",$(".partner")[0].style.display="",$("#VideoCallModalLabel").html("Voice Call")):(localVideo.style.display="",remoteVideo.style.display="",$("#VideoCallModalLabel").html("Video Call")),isVideoCall)0==IsCameraPermission&&(IsCameraPermission=JSBridge.getVideoPermission());else try{0==IsMicrophonePermission&&JSBridge.getAudioPermission()}catch{}$("body").attr("data-mode","ringing"),$("#CallingModal .page2").hide(),$("#CallingModal .page3").hide(),$("#CallingModal .page4").hide(),$("#CallingModal .page1").show(),$("#CallingModal").modal("show"),$("#CallingModal img.me").attr("src",myprofilepic),$("#CallingModal label.me").html(myname),0<$('.def-mess[data-id="'+mySignalRListener.callingUser.userId+'"]').length?($("#CallingModal img.other").attr("src",$('.def-mess[data-id="'+mySignalRListener.callingUser.userId+'"] img').attr("src")),$("#CallingModal h3.other").html($('.def-mess[data-id="'+mySignalRListener.callingUser.userId+'"] label.name').text()),$("#CallingModal .row.blur-img").css("background-image","url('"+$('.def-mess[data-id="'+mySignalRListener.callingUser.userId+'"] img').attr("src")+"')"),$("#CallingModal label.other").html($('.def-mess[data-id="'+mySignalRListener.callingUser.userId+'"] label.name').text())):($("#CallingModal img.other").attr("src",""),$("#CallingModal h3.other").html(""),$.post("/Home/GetUserPicAndName",{uid:mySignalRListener.callingUser.userId},function(e){$("#CallingModal img.other").attr("src",e.profilePic),$("#CallingModal h3.other").html(e.firstName+" "+e.lastName),$("#CallingModal .row.blur-img").css("background-image","url('"+e.profilePic+"')"),$("#CallingModal label.other").html(e.firstName+" "+e.lastName)}))}ProcessReceiveMessege(a,e,n){notifring.play();var s,t,l=a.split(";;;")[1],i="";if(n&&(i=n.split(";")[1],n=n.split(";")[0]),a.startsWith("delmess;,;"))e?$(".contact[data-id="+e.toLowerCase()+"]").hasClass("active")&&(t=(s=a.replace("delmess;,;","").split(";;;")[0]).split(","),$.each(t,function(e,a){e=t[e];$("ul li[data-id="+e+"]").remove()})):$(".contact[data-id="+l+"]").hasClass("active")&&(s=a.replace("delmess;,;","").split(";;;")[0],$("ul li[data-id="+s+"]").remove());else if(a.startsWith("customNotif:"))try{var o=a.split(";;;")[3],r=a.split(";;;")[2],c=a.split(";;;")[4];JSBridge.setCustomNotification(r,c,parseInt(o))}catch{}else{if(e)null==(g=$(".contact[data-id="+e.toLowerCase()+"] .text-bg-success").html())&&this.appendNewContactById(e,!0);else if(null==(g=$(".contact[data-id="+l.toLowerCase()+"] .text-bg-success").html()))return void this.appendNewContactById(l);g?(r=parseInt(g.replace(" ","").replace("(","").replace(")","")),r++,$(".contact[data-id="+(e||l).toLowerCase()+"] .text-bg-success").html(r)):$(".contact[data-id="+(e||l).toLowerCase()+"] .text-bg-success").html("1");try{o=a.split(";;;")[3];JSBridge.setNotification("you have new message",o)}catch{}if($(".contact[data-id="+(e||l).toLowerCase()+"]").hasClass("active")){var d=new Date,c=a.split(";;;")[0],g=a.split(";;;")[2],u=(s=a.split(";;;")[3],a.split(";;;")[4]),m="",h=i?"/ProfilePics/thumbnails/"+i:e?"/img/group-icon.png":"/img/person-icon.png";if("isfile"==c){var p=g.split(",;,")[0].split(";"),v="";1<g.split(",;,").length&&(v=g.split(",;,")[1]);for(var f=0;f<p.length;f++){m=m+('<li class="from-other" data-id="'+s+'" >')+(e?"<div class='float-start'><img src='"+h+"' class='img-pro' /></div><div class='float-start name'>"+n+"</div>":""),v&&(m+='<div class="newcard" data-id="'+(u||"")+`" >
                          <div class="card-header" `+ForwardSenderId(v)+">"+v.split(",@,")[0]+"</div>");var C=document.createTextNode(p[f].split("\\\\").join("\\"));p[f]=C.textContent,IsImage(p[f])?m+='<label><a href="/Home/GetFile?fileName='+p[f]+'&fileType=up" class="js-smartPhoto img-tag"><div><img  class="fupload" src="/Home/GetFile?fileName='+p[f]+'&fileType=up&th=true" /></div><div>'+p[f]+"</div></a></label>":IsAudio(p[f])?m+='<label><div><audio controls src="/Home/GetFile?fileName='+p[f]+'&fileType=up" ></audio></div><div> '+p[f]+"</div></label>":IsVideo(p[f])?m+='<label><div><video controls  ><source src="/Home/GetFile?fileName='+p[f]+'&fileType=up" ></video></div><div> '+p[f]+"</div></label>":IsPdfOrDoc(p[f])?m+='<label><a href="/Home/GetFile?fileName='+p[f]+'&fileType=up" target="_blank" ><div><img class="docpdfimg" src="/Home/GetFile?fileName='+p[f].substring(0,p[f].lastIndexOf("."))+'.jpg&fileType=up&th=true" /></div><div>'+p[f]+"</div></a></label>":m+='<label><a href="/Home/GetFile?fileName='+p[f]+'&fileType=up" target="_blank" ><div><img src="/img/file-icon.png" /></div><div>'+p[f]+"</div></a></label>",v&&(m+="</div>"),m+='</li><li  class="from-other"><div class="date">'+getNiceDateTimeFormat(d)+"</div></li>"}}else m+='<li class="from-other"  data-id="'+s+'" >'+(e?"<div class='float-start'><img src='"+h+"' class='img-pro' /></div><div class='float-start name'>"+n+"</div>":"")+(0<=g.indexOf(",;,")?'<div class="newcard" data-id="'+(u||"")+`" >
                          <div class="card-header">`+g.split(",;,")[0]+"</div><label "+checkRtlOfText(g.split(",;,")[1])+">"+textToWrite(g.split(",;,")[1])+"</label></div>":"<label"+checkRtlOfText(g)+">"+textToWrite(g)+"</label>")+'</li><li  class="from-other"><div class="date">'+getNiceDateTimeFormat(c)+"</div></li>";e?this.SeenMessegeForGroup(s,l,e):this.SeenMessege(s,l),setTimeout(function(){var e=a.split(";;;")[3];e&&$('li[data-id="'+e+'"]').remove(),$("#lastchat").before(m)},500),$("li .newcard:not(.card) .card-header").on("click",function(){var e=$(this).parent().data("id");$(".chat-pm ul").scrollTop($('[data-id="'+e+'"]').get(0).offsetTop-90),$('[data-id="'+e+'"]').eq(0).css("background","black"),setTimeout(function(){$('[data-id="'+e+'"]').eq(0).css("background","transparent")},500),setTimeout(function(){$('[data-id="'+e+'"]').eq(0).css("background","black")},1e3),setTimeout(function(){$('[data-id="'+e+'"]').eq(0).css("background","transparent")},1500)}),$("li .newcard:not(.card)").addClass("card"),setTimeout(function(){$(".chat-pm ul").scrollTop($(".chat-pm ul").get(0).scrollHeight)},500),loadForSelectLi(),0<$(".js-smartPhoto:not(.proc)").length&&(new SmartPhoto(".js-smartPhoto:not(.proc)"),$(".js-smartPhoto:not(.proc)").addClass("proc"))}}}appendNewContactById(e,a){$.post("/Home/GetAccounts",{searchKey:e},function(e){if(0!=e.length){$(".no-mess-contact").hide();for(var a=0;a<e.length;a++){var n=e[a].contactName||e[a].userName,s=e[a].profilePic?"/ProfilePics/thumbnails/"+e[a].profilePic:e[a].isGroup?"/img/group-icon.png":"/img/person-icon.png",s='<div class="mess row contact new-def-mess def-mess" minid="'+e[a].minid+'" data-id="'+e[a].userId+`">
                                    <div class="col-12 d-inline px-3">
                                        <div class="float-start">
                                            <img src="`+s+`" class="img-pro online">
                                        </div>
                                        <div class="float-start text-start px-2">
                                            <div class="pro">
                                                    <label class="name">`+n+`</label>
                                                    <label class="company">`+e[a].companyTitle+`</label>
                                                    <label class="role">`+e[a].position+`</label>
                                            </div>
                                        </div>
                                        <div class="float-end chat-num">
                                            <label class="badge text-bg-success">1</label>
                                        </div>
                                    </div>
                                </div>`;$(".contacts").children().first().before(s),$(".new-def-mess").on("click",function(){$(".contact").removeClass("new-def-mess"),$(".contact").removeClass("active"),$(this).addClass("active");var e=$(this).data("id");$(".loading").show(),$(this).data("id");$.post("/Home/GetContactMessage",{minId:"0",contactId:e},function(e){$(".loading").hide(),null==e||0==e.length?SetEmptyMessage():SetResultOfMessage(e)})}),$(".new-def-mess").addClass("def-mess").removeClass("new-def-mess")}}})}initializeSignalR(){this.wsconn.start().then(()=>{$(".chat h5.chatpage").html("ZN Vostok"),console.log("SignalR: Connected"),this.setUsername(myusername),this.setNewCallInfo()}).catch(e=>{$(".chat h5.chatpage").html("ZN Vostok     Connecting..."),console.log(e)})}setNewCallInfo(){if(e=$("body").attr("data-json"))for(var e=JSON.parse(e),a=0;a<e.length;a++)e[a].userid!=myUserId&&this.sendNewCallInfo(e[a].callid,e[a].isCaller,myUserId)}setUsername(){this.consoleLogger("SingnalR: setting username..."),this.Join()}errorHandler(e){(e.message?alertify.alert("<h4>Error Occurred</h4></br>Error Info: "+JSON.stringify(e.message)):alertify.alert("<h4>Error Occurred</h4></br>Error Info: "+JSON.stringify(e))).set({title:"ZN Vostok"}).set({delay:5e3}),this.consoleLogger(e)}consoleLogger(e){this.isDebugging&&console.log(e)}Join(){var e=uuidv4();this.InvokeProcess(InvokeSender.Join,e,1)}sendNewCallInfo(e,a,n){var s=uuidv4();this.InvokeProcess(InvokeSender.sendNewCallInfo,s,1,e,a,n)}sendBySignalRToGroup(e,a){var n=uuidv4();this.InvokeProcess(InvokeSender.SendToGroup,n,1,e,a)}sendBySignalR(e,a){var n=uuidv4();this.InvokeProcess(InvokeSender.SendToUser,n,1,e,a)}sendBySignalRForDel(e,a){var n=uuidv4();this.InvokeProcess(InvokeSender.SendToUser,n,1,e,"delmess;,;"+a)}callUser(e,a){var n=uuidv4(),s=n,s=(this.InvokeProcess(InvokeSender.CallUser,n,1,s,e,a),$("body").attr("data-json"));(s?s=JSON.parse(s):((s=[]).push({userid:myUserId,st:dt1,isCaller:!0,callid:n,connectionId:mySignalRListener.wsconn.connectionId}),s)).push({userid:e,st:dt1,isCaller:!1,callid:n}),$("body").attr("data-json",JSON.stringify(s))}SeenMessege(e,a){var n=uuidv4();this.InvokeProcess(InvokeSender.Seen,n,1,e,a)}SeenMessegeForGroup(e,a,n){var s=uuidv4();this.InvokeProcess(InvokeSender.SeenForGroup,s,1,e,a,n)}AnswerCall(e,a){var n=uuidv4(),s=mySignalRListener.getCallidByUserId(a.userId);this.InvokeProcess(InvokeSender.AnswerCall,n,1,e,a,s)}getCallidByUserId(a){if(e=$("body").attr("data-json")){var e=(e=JSON.parse(e)).filter(e=>e.userid==a);if(e&&0<e.length)return e[0].callid}return""}NewMemberAndCaller(e,a){var n=uuidv4(),s=mySignalRListener.getCallidByUserId(a.userId),e=(this.InvokeProcess(InvokeSender.NewMemberAndCaller,n,1,e,a,s),$("body").attr("data-json"));(e?e=JSON.parse(e):((e=[]).push({userid:myUserId,st:dt1,isCaller:!0,callid:n}),e)).push({userid:a.userId,st:dt1,isCaller:!1,callid:n}),$("body").attr("data-json",JSON.stringify(e))}SendSignal(e,a){var n=this.getLocalIsCaller(a),s=uuidv4();this.InvokeProcess(InvokeSender.SendSignal,s,1,e,a,n)}getLocalIsCaller(a){var e=$("body").attr("data-json");return!!e&&(e=JSON.parse(e)).filter(e=>e.callid=a&&e.userid==myUserId)[0].isCaller}HangUp(){var e=uuidv4();if(a=$("body").attr("data-json"))for(var a=JSON.parse(a),n=0;n<a.length;n++)this.InvokeProcess(InvokeSender.Hangup,e,1,a[n].callid,a[n].isCaller)}InvokeProcess(e,a,n,s,t,l,i,o){switch(e){case InvokeSender.SendToUser:var r=s,c=t;this.wsconn.invoke("SendMessage",a,r,c);break;case InvokeSender.SendToGroup:r=s,c=t;this.wsconn.invoke("SendMessageToGroup",a,r,c);break;case InvokeSender.SendForDel:r=s;this.wsconn.invoke("SendMessage",a,r,"delmess;,;"+t);break;case InvokeSender.Seen:var d=s,c=t;console.log("SeenMessege","before"),this.wsconn.invoke("SeenMessege",a,d,c),console.log("SeenMessege","after");break;case InvokeSender.SeenForGroup:d=s;this.wsconn.invoke("SeenMessegeForGroup",a,d,t,l);break;case InvokeSender.sendNewCallInfo:var g=s,u=t,r=l;this.wsconn.invoke("SendNewCallInfo",a,g,u,r);break;case InvokeSender.CallUser:g=s,r=t;this.wsconn.invoke("CallUser",a,g,r,l);break;case InvokeSender.AnswerCall:var m=s,h=t,g=l;this.wsconn.invoke("AnswerCall",a,m,JSON.stringify(h),g);break;case InvokeSender.NewMemberAndCaller:m=s,h=t,g=l;this.wsconn.invoke("NewMemberAndCaller",a,m,JSON.stringify(h),g);break;case InvokeSender.SendSignal:c=s,g=t,u=l,d=mySignalRListener.getBeforeCallIdAndRemoveThat(g);this.wsconn.invoke("SendSignal",a,c,g,u,d);break;case InvokeSender.Hangup:g=s;this.wsconn.invoke("HangUp",a,g,t);break;case InvokeSender.Join:this.wsconn.invoke("JoinUser",a)}}SendNotConnectAlert(e){alertify.confirm(e,function(e){e&&window.location.reload(),this.sendNotConnectMess=!1}).set({title:"ZN Vostok"}).set("closable",!1).set("labels",{ok:"Refresh",cancel:"Wait for now"})}getBeforeCallIdAndRemoveThat(a){var e=$("body").attr("data-json"),n="";return e&&(e=(e=JSON.parse(e)).filter(e=>e.callid==a))&&0<e.length&&(n=e[0].beforecallid,e[0].beforecallid=null),n}}var myDubList=[];async function CheckDuplicateInLockBlock(a){try{console.log("CheckDuplicateInLockBlock","begin");var e=await navigator.locks.request("my_resource",e=>pushToDuplicateListAndRun(a));return console.log("CheckDuplicateInLockBlock","end"),e}catch(e){console.log("CheckDuplicateInLockBlock","error:"+e)}}function pushToDuplicateListAndRun(e){return!(0<=myDubList.indexOf(e)||(myDubList.push(e),20<myDubList.length&&myDubList.shift(),0))}const InvokeSender={SendToUser:"SendToUser",SendToGroup:"SendToGroup",sendNewCallInfo:"sendNewCallInfo",SendForDel:"SendForDel",Seen:"Seen",SeenForGroup:"SeenForGroup",SendSignal:"SendSignal",Hangup:"Hangup",CallUser:"CallUser",AnswerCall:"AnswerCall",NewMemberAndCaller:"NewMemberAndCaller",JoinGuest:"JoinGuest",Join:"Join"};var mySignalRListener=new signalRListener,firstRunFunction=!0,checkSignalrConnectivity=setInterval(function(){checkForRestartSignalR()},7e3);function checkForRestartSignalR(){0==firstRunFunction?"connected"!=mySignalRListener.wsconn.state.toString().toLowerCase()?mySignalRListener=new signalRListener:$(".chat h5.chatpage").html("ZN Vostok"):firstRunFunction=!1}function uuidv4(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}