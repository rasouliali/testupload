function fileUploader(n,t){var u,i,r;for($(".loading").show(),u=n.files,i=new FormData,r=0;r<u.length;r++)i.append(u[r].name,u[r]);i.append("contactId",t);i.append("replyId",replyid);$.ajax({url:"/Home/UploadFiles",type:"POST",contentType:!1,processData:!1,data:i,"async":!1,success:function(n){n!=""&&LoadProgressBar(n,t)},error:function(n){alert(n.statusText)}})}function LoadProgressBar(n,t){function u(){var n=i.progressbar("value")||0;i.progressbar("value",n+1);n<99&&setTimeout(u,25)}var i=$("#files-progressbar"),r=$(".progress-label");$("#pogressbarModal").modal({backdrop:"static",keyboard:!1});$("#pogressbarModal").modal("show");i.show();$("#files-progressbar").progressbar({change:function(){r.text(i.progressbar("value")+"%")},complete:function(){var u;r.text("Loading Completed!");i.progressbar("value",0);r.text("");i.hide();var f=n.split(";"),o="",e=$(".message-input .card-header").text();for(e&&(e=e.substring(0,e.length-1)),u=0;u<f.length;u++)o+=`<li class="from-me">`,e&&(o+=`<div class="card" data-id="`+(replyid?replyid:"")+`" >
                      <div class="card-header">`+e+`</div>`),o+=IsImage(f[u])?`<label><a data-url="/uploads/`+f[u]+`" class="img-tag" ><div><img class="fupload" src="/uploads/thumbnails/`+f[u]+`" /></div><div>`+f[u]+`</div></a></label>`:IsAudio(f[u])?`<label><div><audio controls src="/uploads/`+f[u]+`" ></audio></div><div> `+f[u]+`</div></label>`:IsVideo(f[u])?`<label><div><video controls  ><source src="/uploads/`+f[u]+`" ></video></div><div> `+f[u]+`</div></label>`:IsPdfOrDoc(f[u])?`<label><a href="/uploads/`+f[u]+`" target="_blank" ><div><img src="/uploads/thumbnails/`+f[u].substring(0,f[u].lastIndexOf("."))+`.jpg"  /></div><div>`+f[u]+`</div></a></label>`:`<label><a href="/uploads/`+f[u]+`" target="_blank" ><div><img src="/img/file-icon.png" class="img-ico" /></div><div>`+f[u]+`</div></a>></label>`,e&&(o+=`</div>`),o+=`</li>`;$(".loading").hide();$(".chat-pm-input textarea").val("");$("#lastchat").before(o);$(".img-tag").unbind("click");$(".img-tag").on("click",function(){var n=$(this).data("url");loadImageModal(n)});$("#Files").val("");$("#pogressbarModal").modal("hide");sendBySignalR(t,"isfile;;;"+userid+";;;"+n+",;,"+e+";;;;;;"+replyid);replyid?($(".message-input .card-header span").trigger("click"),replyid=""):allDropDownButtonProcess()}});setTimeout(u,100)}function IsImage(n){var t=n.toLowerCase().substring(n.lastIndexOf("."));return[".jpg",".jpeg",".bmp",".png",".gif",".tiff"].includes(t)?!0:!1}function IsAudio(n){var t=n.toLowerCase().substring(n.lastIndexOf("."));return[".wav",".mp3"].includes(t)?!0:!1}